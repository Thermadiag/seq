<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SEQ library: Arithmetic value convertion from/to string</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SEQ library
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Original STL like containers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___charconv.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Arithmetic value convertion from/to string</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Charconv module provides fast routines to convert numerical values from/to string.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Charconv module provides fast routines to convert numerical values from/to string. </p>
<h2><a class="anchor" id="autotoc_md0"></a>
Low level functions</h2>
<p>The main functions of \Charconv are seq::to_chars and seq::from_chars which provide a similar interface to C++17 functions std::from_chars and std::to_chars. They aim to provide a faster alternative to C++ streams for converting floating point and integer types from/to string.</p>
<p>seq::from_chars() is similar to std::from_chars with the following differences:</p><ul>
<li>Leading spaces are consumed.</li>
<li>For integral types, a leading '0x' prefix is considered valid.</li>
<li>For floating point values: if the pattern is a valid floating point text representation too large or too small to be stored in given output value, value will be set to (+-)inf or (+-)0, and the full pattern will be consumed. Therefore, std::errc::result_out_of_range is never returned.</li>
<li>Leading '+' sign is considered valid.</li>
<li>Custom 'dot' character can be passed as argument.</li>
<li>For floating point values: this function is not an exact parser. In some cases it relies on unprecise floating point arithmetic wich might produce different roundings than strtod() function. Note that the result is almost always equal to the result of strtod(), and potential differences are located in the last digits. Use this function when the speed factor is more important than 100% perfect exactitude.</li>
</ul>
<p>seq::to_chars is similar to std::to_chars with the following differences </p><pre class="fragment">-   For integral type, additional options on the form of a seq::integral_chars_format object can be passed. They add the possibility to output a leading '0x' for hexadecimal
    formatting, a minimum width (with zeros padding), upper case outputs for hexadecimal formatting.
-   For floating point values, the 'dot' character can be specified.
-   For floating point values, this function is NOT AN EXACT formatter. There are currently a lot of different algorithms to provide fast and exact convertion of floating point 
    values to strings: ryu, grisu-exact, dragonbox... This function tries to provide a faster and lighter alternative when exact precision is not a requirement (which is my case).
    Internal benchmarks show that convertiing double values to string using this function is around 2 times faster than with ryu library for scientific or general formatting, 
    and 3 times faster with fixed formatting. When converting double values, obtained strings are similar to the result of printf in 100% of the cases when the required precision 
    is below 12. After that, the ratio decreases to 86% of exactitude for a precision of 17. Converting a very high (or very small) value with the 'f' specifier will usually produce 
    slightly different output, especially in the "garbade" digits.
</pre><h2><a class="anchor" id="autotoc_md1"></a>
Working with C++ streams</h2>
<p>To write numerical values to C++ std::ostream objects, see the \Format module.</p>
<p>To read numerical values from std::istream object, the \Charconv module provides the stream adapter <a class="el" href="classseq_1_1std__input__stream.html" title="Input stream working on a std::istream.">seq::std_input_stream</a>. It was developped to read huge tables or matrices from ascii files or string.</p>
<p>Basic usage:</p>
<div class="fragment"><div class="line">std::ifstream fin(<span class="stringliteral">&quot;my_huge_file.txt&quot;</span>);</div>
<div class="line"><a class="code" href="classseq_1_1std__input__stream.html">seq::std_input_stream&lt;&gt;</a> istream(fin);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read trailing lines</span></div>
<div class="line">std::string trailer;</div>
<div class="line">seq::read_line_from_stream(istream, trailer);</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read words</span></div>
<div class="line">std::string word;</div>
<div class="line">seq::from_stream(istream, word);</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read all numeric values into a vector</span></div>
<div class="line">std::vector&lt;double&gt; vec;</div>
<div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">    <span class="keywordtype">double</span> v;</div>
<div class="line">    seq::from_stream(istream, v);</div>
<div class="line">    <span class="keywordflow">if</span> (istream)</div>
<div class="line">        vec.push_back(v);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Internal benchmarks show that using from_stream() is around 20 faster (or more) than using std::istream::operator&gt;&gt;() when reading floating point values from a huge string.</p>
<p>In additional to <a class="el" href="classseq_1_1std__input__stream.html" title="Input stream working on a std::istream.">seq::std_input_stream</a>, \Charconv module provides the similar <a class="el" href="classseq_1_1buffer__input__stream.html" title="Input stream working on a sequence of characters.">seq::buffer_input_stream</a> and <a class="el" href="classseq_1_1file__input__stream.html" title="Input stream working on a FILE pointer.">seq::file_input_stream</a>. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassseq_1_1std__input__stream_html"><div class="ttname"><a href="classseq_1_1std__input__stream.html">seq::std_input_stream</a></div><div class="ttdoc">Input stream working on a std::istream.</div><div class="ttdef"><b>Definition:</b> charconv.hpp:1854</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
