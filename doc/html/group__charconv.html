<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SEQ library: Charconv: arithmetic value convertion from/to string</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SEQ library
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Original STL like containers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__charconv.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<div class="title">Charconv: arithmetic value convertion from/to string</div>  </div>
</div><!--header-->
<div class="contents">

<p>The charconv module provides fast routines to convert numerical values from/to string. This module was initially developped for very fast containers dump in files or strings.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceseq"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceseq.html">seq</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The charconv module provides fast routines to convert numerical values from/to string. This module was initially developped for very fast containers dump in files or strings. </p>
<h2><a class="anchor" id="autotoc_md9"></a>
Low level functions</h2>
<p>The main functions of charconv module are <a class="el" href="namespaceseq.html#a9e1cfb2de75c85497d57702430705b1c" title="Converts value into a character string by successively filling the range [first, last),...">seq::to_chars</a> and <a class="el" href="namespaceseq.html#ac422fc75d3e6f011374ffeed3683da55" title="Read an integral value from the sequence of characters [first,last).">seq::from_chars</a> which provide a similar interface to C++17 functions std::from_chars and std::to_chars. They aim to provide a faster alternative to C++ streams for converting floating point and integer types from/to string. Note that they were developped to accomodate my needs, and might not be used in all circumstances.</p>
<p><a class="el" href="namespaceseq.html#ac422fc75d3e6f011374ffeed3683da55" title="Read an integral value from the sequence of characters [first,last).">seq::from_chars()</a> is similar to std::from_chars with the following differences:</p><ul>
<li>Leading spaces are consumed.</li>
<li>For integral types, a leading '0x' prefix is considered valid.</li>
<li>For floating point values: if the pattern is a valid floating point text representation too large or too small to be stored in given output value, value will be set to (+-)inf or (+-)0, and the full pattern will be consumed. Therefore, std::errc::result_out_of_range is never returned.</li>
<li>Leading '+' sign is considered valid.</li>
<li>Custom 'dot' character can be passed as argument.</li>
<li>For floating point values: this function IS NOT AN EXACT PARSER. In some cases it relies on unprecise floating point arithmetic wich might produce different roundings than strtod() function. Note that the result is almost always equal to the result of strtod(), and potential differences are located in the last digits. Use this function when the speed factor is more important than 100% perfect exactitude.</li>
</ul>
<p><a class="el" href="namespaceseq.html#a9e1cfb2de75c85497d57702430705b1c" title="Converts value into a character string by successively filling the range [first, last),...">seq::to_chars</a> is similar to std::to_chars with the following differences</p><ul>
<li>For integral types, additional options on the form of a <a class="el" href="structseq_1_1integral__chars__format.html" title="Parameters for integer to string conversion using seq::to_chars.">seq::integral_chars_format</a> object can be passed. They add the possibility to output a leading '0x' for hexadecimal formatting, a minimum width (with zeros padding), upper case outputs for hexadecimal formatting.</li>
<li>For floating point values, the 'dot' character can be specified.</li>
<li>For floating point values, this function is NOT AN EXACT FORMATTER. There are currently a lot of different algorithms to provide fast convertion of floating point values to strings with round-trip guarantees: ryu, grisu-exact, dragonbox... This function tries to provide a faster and lighter alternative when perfect round-trip is not a requirement (which is my case). When converting double values, obtained strings are similar to the result of printf in 100% of the cases when the required precision is below 12. After that, the ratio decreases to 86% of exactitude for a precision of 17. Converting a very high (or very small) value with the 'f' specifier will usually produce slightly different output, especially in the "garbage" digits.</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Working with C++ streams</h2>
<p>To write numerical values to C++ std::ostream objects, see the <a class="el" href="group__format.html">format</a> module.</p>
<p>To read numerical values from std::istream object, the charconv module provides the stream adapter <a class="el" href="classseq_1_1std__input__stream.html" title="Input stream working on a std::istream.">seq::std_input_stream</a>. It was developped to read huge tables or matrices from ascii files or strings.</p>
<p>Basic usage:</p>
<div class="fragment"><div class="line">std::ifstream fin(<span class="stringliteral">&quot;my_huge_file.txt&quot;</span>);</div>
<div class="line"><a class="code" href="classseq_1_1std__input__stream.html">seq::std_input_stream&lt;&gt;</a> istream(fin);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read trailing lines</span></div>
<div class="line">std::string trailer;</div>
<div class="line"><a class="code" href="namespaceseq.html#add85486f09f54fba24d5f3cc4737474c">seq::read_line_from_stream</a>(istream, trailer);</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read words</span></div>
<div class="line">std::string word;</div>
<div class="line"><a class="code" href="namespaceseq.html#ade167dcc6d29b420964a6be1498889ac">seq::from_stream</a>(istream, word);</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read all numeric values into a vector</span></div>
<div class="line">std::vector&lt;double&gt; vec;</div>
<div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">    <span class="keywordtype">double</span> v;</div>
<div class="line">    <a class="code" href="namespaceseq.html#ade167dcc6d29b420964a6be1498889ac">seq::from_stream</a>(istream, v);</div>
<div class="line">    <span class="keywordflow">if</span> (istream)</div>
<div class="line">        vec.push_back(v);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Internal benchmarks show that using <a class="el" href="namespaceseq.html#ac2d0cf3592690ba5924d6eb3f5cf48a8" title="Read a word from a #basic_input_stream object.">from_stream()</a> is around 20 faster (or more) than using <a class="el" href="namespaceseq.html#a7083aa58832400e4ec4cd4baaf5b39d0">std::istream::operator&gt;&gt;()</a> when reading floating point values from a huge string.</p>
<p>In additional to <a class="el" href="classseq_1_1std__input__stream.html" title="Input stream working on a std::istream.">seq::std_input_stream</a>, charconv module provides the similar <a class="el" href="classseq_1_1buffer__input__stream.html" title="Input stream working on a sequence of characters.">seq::buffer_input_stream</a> and <a class="el" href="classseq_1_1file__input__stream.html" title="Input stream working on a FILE pointer.">seq::file_input_stream</a>. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="anamespaceseq_html_ade167dcc6d29b420964a6be1498889ac"><div class="ttname"><a href="namespaceseq.html#ade167dcc6d29b420964a6be1498889ac">seq::from_stream</a></div><div class="ttdeci">auto from_stream(Stream &amp;str, T &amp;value, int base=10) -&gt; Stream &amp;</div><div class="ttdoc">Read an integral value from a seq::basic_input_stream object.</div><div class="ttdef"><b>Definition:</b> charconv.hpp:2381</div></div>
<div class="ttc" id="aclassseq_1_1std__input__stream_html"><div class="ttname"><a href="classseq_1_1std__input__stream.html">seq::std_input_stream</a></div><div class="ttdoc">Input stream working on a std::istream.</div><div class="ttdef"><b>Definition:</b> charconv.hpp:2001</div></div>
<div class="ttc" id="anamespaceseq_html_add85486f09f54fba24d5f3cc4737474c"><div class="ttname"><a href="namespaceseq.html#add85486f09f54fba24d5f3cc4737474c">seq::read_line_from_stream</a></div><div class="ttdeci">auto read_line_from_stream(Stream &amp;str, std::string &amp;value) -&gt; Stream &amp;</div><div class="ttdoc">Read a line from a #basic_input_stream object.</div><div class="ttdef"><b>Definition:</b> charconv.hpp:2540</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
